<html>
  <head>
    <title>SoFiA Handbook - Parameters: Input</title>
    
    <style>
        body      {margin:5px;}
        table     {margin:10px 0px; border:2px solid #FFFFFF; border-collapse:collapse; empty-cells:show;}
        td        {margin:0px; padding:2px 5px; vertical-align:top; border:2px solid #FFFFFF;}
        td.head   {background-color:#406080; color:#D0E0F0; font-weight:bold;}
        td.head2  {background-color:#806040; color:#F0E0D0; font-weight:bold;}
        td.body   {background-color:#F0F0F0; color:#000000;}
        td.body2  {background-color:#F0F0F0; color:#406080; font-weight:bold;}
        td.body3  {background-color:#F0F0F0; color:#806040; font-weight:bold;}
        code      {color:#800000;}
        h1        {color:#406080;}
        h2        {color:#406080;}
        h3        {color:#406080;}
    </style>
  </head>
  
  <body>
    <h1>Parameters</h1>
    
    <h2>Input</h2>
    
    <h3>Input Files</h3>
    
    <table id="import.inFile">
        <tr>
            <td class="head">Parameter:</td><td class="body2">import.inFile</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>string</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body"></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code></code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">Full path and name of input data cube. This option is mandatory, and there is no default. Note that only FITS files are currently supported by SoFiA.</td>
        </tr>
    </table>
    
    <table id="import.maskFile">
        <tr>
            <td class="head">Parameter:</td><td class="body2">import.maskFile</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>string</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body"></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code></code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">Name of an optional file containing a mask of pixels identified as part of a source, e.g. from a previous run of SoFiA. This can be used to re-parametrise sources without repeating the source finding step. The default is to not read a mask cube.</td>
        </tr>
    </table>
    
    <table id="import.weightsFile">
        <tr>
            <td class="head">Parameter:</td><td class="body2">import.weightsFile</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>string</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body"></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code></code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">Name of an optional file containing weights of pixels in the input cube. The weights will be applied before running the source finder. The default is to not apply weights.</td>
        </tr>
    </table>
    
    <table id="import.weightsFunction">
        <tr>
            <td class="head">Parameter:</td><td class="body2">import.weightsFunction</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>string</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body"></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code></code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">Analytic function used to describe the data weights as a function of x, y, and z. The default is to not apply weights. The following mathematical functions from Numpy are supported: <code>sin()</code>, <code>cos()</code>, <code>tan()</code>, <code>arcsin()</code>, <code>arccos()</code>, <code>arctan()</code>, <code>arctan2()</code>, <code>sinh()</code>, <code>cosh()</code>, <code>tanh()</code>, <code>arcsinh()</code>, <code>arccosh()</code>, <code>arctanh()</code>, <code>exp()</code>, <code>log()</code>, <code>log10()</code>, <code>log2()</code>, <code>sqrt()</code>, <code>square()</code>, <code>power()</code>, <code>absolute()</code>, <code>fabs()</code>, and <code>sign()</code>. Note that the weights function is not applied whenever a weights cube is specified (see <a href="#import.weightsFile">import.weightsFile</a>).</td>
        </tr>
    </table>
    
    <h3>Subcube</h3>
    
    <table id="steps.doSubcube">
        <tr>
            <td class="head">Parameter:</td><td class="body2">steps.doSubcube</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>bool</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body"></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code>false</code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">If set to <code>true</code>, source finding can be carried out on a subcube to be defined by the <a href="#import.subcube">import.subcube</a> and <a href="#import.subcubeMode">import.subcubeMode</a> options.</td>
        </tr>
    </table>
    
    <table id="import.subcube">
        <tr>
            <td class="head">Parameter:</td><td class="body2">import.subcube</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>list</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body"></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code>[]</code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">This parameter defines a subcube to be read in and processed by SoFiA. Depending on the value of import.subcubeMode, the range is either specified in pixels as <code>[x1, x2, y1, y2, z1, z2]</code> or in world coordinates as <code>[x, y, z, rx, ry, rz]</code> depending on the value of <a href="#import.subcubeMode">import.subcubeMode</a>. In the latter case, <code>x</code>, <code>y</code> and <code>z</code> define the centre of the subcube, and <code>rx</code>, <code>ry</code> and <code>rz</code> specify the half-widths in the three dimensions. If world coordinates are used, all parameters must be in the native format as defined in the header of the data cube; e.g. if <code>CUNIT3</code> is <code>'Hz'</code> then both <code>z</code> and <code>rz</code> must be given in hertz. The default is an empty list, <code>[]</code>, which means to read the entire cube.</td>
        </tr>
    </table>
    
    <table id="import.subcubeMode">
        <tr>
            <td class="head">Parameter:</td><td class="body2">import.subcubeMode</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>string</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body"><code>pixel</code>, <code>world</code></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code>pixel</code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">This parameter defines whether import.subcube is specified in pixels (<code>pixel</code>) or in world coordinates (<code>world</code>).</td>
        </tr>
    </table>
    
    <h3>Flagging</h3>
    
    <table id="steps.doFlag">
        <tr>
            <td class="head">Parameter:</td><td class="body2">steps.doFlag</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>bool</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body"><code>true</code>, <code>false</code></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code>false</code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">Flag pixel and channel ranges before proceeding. Details are specified with the <a href="#flag.regions">flag.regions</a> option.</td>
        </tr>
    </table>
    
    <table id="flag.regions">
        <tr>
            <td class="head">Parameter:</td><td class="body2">flag.regions</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>list</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body"></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code>[]</code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">Pixel/channel range(s) to be flagged prior to source finding. Format: <code>[[x1, x2, y1, y2, z1, z2], ...]</code>. A place holder, <code>''</code> (two single quotes), can be used for the upper range limit (<code>x2</code>, <code>y2</code>, and <code>z2</code>) to flag all the way to the end, e.g. <code>[[0, '', 0, '', 0, 19]]</code> will flag the first 20 channels of the entire cube. The default is an empty list, <code>[]</code>, which means to not flag anything.</td>
        </tr>
    </table>
    
    <h3>Optical Catalogue</h3>
    
    <table id="steps.doOptical">
        <tr>
            <td class="head">Parameter:</td><td class="body2">steps.doOptical</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>bool</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body"><code>true</code>, <code>false</code></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code>false</code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">If set to <code>true</code>, run SoFiA on multiple, smaller sub-cubes centred on positions defined in an input source catalogue. A catalogue file will need to be specified (see parameter <a href="#optical.sourceCatalogue">optical.sourceCatalogue</a>). This could, e.g., be an optical galaxy catalogue with the aim to search for HI detections at the positions of all galaxies.</td>
        </tr>
    </table>
    
    <table id="optical.sourceCatalogue">
        <tr>
            <td class="head">Parameter:</td><td class="body2">optical.sourceCatalogue</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>string</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body"></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code></code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">This parameter defines the full path to the input catalogue required for catalogue-based source finding (see parameter <a href="#steps.doOptical">steps.doOptical</a>). There is no default.</td>
        </tr>
    </table>
    
    <table id="optical.spatSize">
        <tr>
            <td class="head">Parameter:</td><td class="body2">optical.spatSize</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>float</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body">&ge; <code>0.0</code></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code>0.01</code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">This parameter defines the spatial size of the sub-cube to be searched around each catalogue position. The size must be specified in the native units of the data cube, e.g. in degrees.</td>
        </tr>
    </table>
    
    <table id="optical.specSize">
        <tr>
            <td class="head">Parameter:</td><td class="body2">optical.specSize</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>float</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body">&ge; <code>0.0</code></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code>1e+5</code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">This parameter defines the spectral size of the sub-cube to be searched around each catalogue position. The size must be specified in the native units of the data cube, e.g. in km/s or Hz.</td>
        </tr>
    </table>
    
    <table id="optical.storeMultiCat">
        <tr>
            <td class="head">Parameter:</td><td class="body2">optical.storeMultiCat</td>
        </tr>
        <tr>
            <td class="head">Type:</td><td class="body"><code>bool</code></td>
        </tr>
        <tr>
            <td class="head">Values:</td><td class="body"><code>true</code>, <code>false</code></td>
        </tr>
        <tr>
            <td class="head">Default:</td><td class="body"><code>false</code></td>
        </tr>
        <tr>
            <td class="head">Description:</td><td class="body">If set to <code>true</code>, a separate output catalogue will be created for each input position, containing only the sources found in that subcube. In addition, a single, merged catalogue will also be created. By default this parameter is set to <code>false</code>, in which case only a single output catalogue file is generated.</td>
        </tr>
    </table>
    
    <p align="center">
      <a href="parameters.html">&larr;&nbsp;Previous</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="parameters.html">&uarr;&nbsp;Up</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="parameters_inputfilter.html">Next&nbsp;&rarr;</a>
    </p>
    
    <p>&nbsp;</p>
  </body>
</html>
