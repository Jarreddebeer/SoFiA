<html>
  <head>
    <title>SoFiA Handbook - Parameters: Input</title>
  </head>
  
  <body style="margin:5px;">
    <h1 style="color:#4060A0;">Parameters</h1>
    
    <h2 style="color:#4060A0;">Input</h2>
    
    <p align="center">
      <img src="images/interface_input.png" width="480" heigh="239" alt="SoFiA User Interface: Input Parameters" />
    </p>
    
    <p>
      Here, the input data files and settings can be specified.
    </p>
    
    <h3 style="color:#4060A0;">Input Data</h3>
    
    <table style="margin:10px; background-color:#E0F0FF;" cellspacing="0" cellpadding="3" border="1">
      <tr>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Module / Parameter</th>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Type</th>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Values</th>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Description</th>
      </tr>
      <tr>
        <td>import.inFile</td>
        <td>string</td>
        <td>file name</td>
        <td>Name of input data file. This option is mandatory, and there is no default. Note that only FITS files are currently supported.</td>
      </tr>
      <tr style="background-color:#F0F8FF;">
        <td>import.maskFile</td>
        <td>string</td>
        <td>file name</td>
        <td>Name of optional file containing a mask of pixels identified as part of a source, e.g. from a previous run of SoFiA. This can be used to re-parametrise sources without repeating the source finding step. The default is to not read a mask cube.</td>
      </tr>
      <tr>
        <td>import.weightsFile</td>
        <td>string</td>
        <td>file name</td>
        <td>Name of optional file containing weights of pixels in the input cube. The weights will be applied before running the source finder. The default is to not apply weights.</td>
      </tr>
      <tr style="background-color:#F0F8FF;">
        <td>import.weightsFunction</td>
        <td>string</td>
        <td>analytic function</td>
        <td>Analytic function used to describe the data weights as a function of x, y, and z. The default is to not apply weights. The following mathematical functions from <a href="http://docs.scipy.org/doc/numpy/reference/routines.math.html">Numpy</a> are supported: sin(), cos(), tan(), arcsin(), arccos(), arctan(), arctan2(), sinh(), cosh(), tanh(), arcsinh(), arccosh(), arctanh(), exp(), log(), log10(), log2(), sqrt(), square(), power(), absolute(), fabs(), and sign(). Note that the weights function is not applied whenever a weights cube is specified (see import.weightsFile).</td>
      </tr>
    </table>
    
    <h3 style="color:#4060A0;">Subcube</h3>
    
    <table style="margin:10px; background-color:#E0F0FF;" cellspacing="0" cellpadding="3" border="1">
      <tr>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Module / Parameter</th>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Type</th>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Values</th>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Description</th>
      </tr>
      <tr>
        <td>import.subcube</td>
        <td>list</td>
        <td>subcube range; default: <b>[]</b></td>
        <td>This parameter defines a subcube to be read in and processed by SoFiA. Depending on the value of import.subcubeMode, the range is either specified in pixels as [x1, x2, y1, y2, z1, z2] or in world coordinates as [x, y, z, rx, ry, rz]. In the latter case, x, y and z define the centre of the subcube, and rx, ry and rz specify the half-widths in the three dimensions. If world coordinates are used, all parameters must be in the native format as defined in the header of the data cube; e.g. if CUNIT3 is 'Hz' then both z and rz must be given in hertz. The default is an empty list, [], which means to read the entire cube.</td>
      </tr>
      <tr style="background-color:#F0F8FF;">
        <td>import.subcubeMode</td>
        <td>string</td>
        <td><b>pixel</b>, world</td>
        <td>This parameter defines whether import.subcube is specified in pixels (pixel) or in world coordinates (world).</td>
      </tr>
    </table>
    
    <h3 style="color:#4060A0;">Flagging</h3>
    
    <table style="margin:10px; background-color:#E0F0FF;" cellspacing="0" cellpadding="3" border="1">
      <tr>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Module / Parameter</th>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Type</th>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Values</th>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Description</th>
      </tr>
      <tr>
        <td>steps.doFlag</td>
        <td>bool</td>
        <td>true, <b>false</b></td>
        <td>Flag certain pixel and channel ranges before proceeding.</td>
      </tr>
      <tr style="background-color:#F0F8FF;">
        <td>flag.regions</td>
        <td>list</td>
        <td>range(s) to be flagged; default: <b>[]</b></td>
        <td>Pixel/channel range(s) to be flagged prior to source finding. Format: [[x1, x2, y1, y2, z1, z2], ...]. A place holder, '' (two single quotes), can be used for the upper range limit (x2, y2, and z2) to flag all the way to the end, e.g. [[0, '', 0, '', 0, 19]] will flag the first 20&nbsp;channels of the entire cube. The default is an empty list, [], which means to not flag anything.</td>
      </tr>
    </table>
    
    <h3 style="color:#4060A0;">Catalogue-based Source Finding</h3>
    
    <table style="margin:10px; background-color:#E0F0FF;" cellspacing="0" cellpadding="3" border="1">
      <tr>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Module / Parameter</th>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Type</th>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Values</th>
        <th align="left" style="background-color:#4060A0; color:#FFFFFF;">Description</th>
      </tr>
      <tr>
        <td>steps.doOptical</td>
        <td>bool</td>
        <td>true, <b>false</b></td>
        <td>Run SoFiA on multiple, smaller subcubes centred on positions defined in an input source catalogue. A catalogue file will need to be specified (see parameter optical.sourceCatalogue). This could, e.g., be an optical galaxy catalogue with the aim to search for HI detections at the positions of all galaxies.</td>
      </tr>
      <tr style="background-color:#F0F8FF;">
        <td>optical.sourceCatalogue</td>
        <td>string</td>
        <td>file name</td>
        <td>This defines the full path to the input catalogue required for catalogue-based source finding (see parameter steps.doOptical). There is no default.</td>
      </tr>
      <tr>
        <td>optical.spatSize</td>
        <td>float</td>
        <td>&ge; 0; default: <b>0.01</b></td>
        <td>This defines the spatial size of the subcube to be searched around each catalogue position. The size must be specified in the native units of the data cube, e.g. in degrees.</td>
      </tr>
      <tr style="background-color:#F0F8FF;">
        <td>optical.specSize</td>
        <td>float</td>
        <td>&ge; 0; default: <b>1e+5</b></td>
        <td>This defines the spectral size of the subcube to be searched around each catalogue position. The size must be specified in the native units of the data cube, e.g. in km/s or Hz.</td>
      </tr>
      <tr>
        <td>optical.storeSingleCat</td>
        <td>bool</td>
        <td>true, <b>false</b></td>
        <td>If set to true, a single output catalogue will be generated that contains the detections around all positions specified in the input catalogue. By default this parameter is set to false, in which case a separate output catalogue file is generated for each input position.</td>
      </tr>
    </table>
    
    <p align="center">
      <a href="parameters.html">&larr;&nbsp;Previous</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="parameters.html">&uarr;&nbsp;Up</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="parameters_inputfilter.html">Next&nbsp;&rarr;</a>
    </p>
    
    <p>&nbsp;</p>
  </body>
</html>
